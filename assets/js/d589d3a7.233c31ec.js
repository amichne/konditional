"use strict";(self.webpackChunkkonditional_docs=self.webpackChunkkonditional_docs||[]).push([[924],{48193(e,n,t){t.d(n,{R:()=>s,x:()=>r});var a=t(30758);const l={},i=a.createContext(l);function s(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),a.createElement(i.Provider,{value:n},e.children)}},61117(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"getting-started","title":"Getting Started","description":"Konditional is a Kotlin feature-flag DSL designed to make configuration typed, deterministic, and non-null.","source":"@site/docs/getting-started.md","sourceDirName":".","slug":"/getting-started","permalink":"/konditional/getting-started","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Konditional","permalink":"/konditional/"},"next":{"title":"Migration Guide","permalink":"/konditional/migration"}}');var l=t(86070),i=t(48193);const s={},r="Getting Started",d={},o=[{value:"Why Konditional (and what it actually guarantees)",id:"why-konditional-and-what-it-actually-guarantees",level:2},{value:"Installation",id:"installation",level:2},{value:"Your first flag",id:"your-first-flag",level:2},{value:"A small API surface, intentionally",id:"a-small-api-surface-intentionally",level:2},{value:"Common patterns",id:"common-patterns",level:2},{value:"Gradual ramp-up (deterministic)",id:"gradual-ramp-up-deterministic",level:3},{value:"Platform-specific configuration",id:"platform-specific-configuration",level:3},{value:"Ramp-up allowlisting (internal testers)",id:"ramp-up-allowlisting-internal-testers",level:3},{value:"Variants via enums (not strings)",id:"variants-via-enums-not-strings",level:3},{value:"Namespaces scale ownership, not prefixes",id:"namespaces-scale-ownership-not-prefixes",level:2},{value:"Next steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"getting-started",children:"Getting Started"})}),"\n",(0,l.jsxs)(n.p,{children:["Konditional is a Kotlin feature-flag DSL designed to make configuration ",(0,l.jsx)(n.em,{children:"typed"}),", ",(0,l.jsx)(n.em,{children:"deterministic"}),", and ",(0,l.jsx)(n.em,{children:"non-null"}),".\nThe core claim is precise: statically-defined flags have compile-time type correctness, and evaluation is total (you\nalways get a value back)."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"why-konditional-and-what-it-actually-guarantees",children:"Why Konditional (and what it actually guarantees)"}),"\n",(0,l.jsx)(n.p,{children:"Most flag systems are stringly-typed: a string key selects a value and the caller chooses a \u201ctyped getter\u201d.\nThat architecture creates three failure modes that are syntactically valid but semantically wrong at runtime: key typos,\ntype mismatches, and null propagation."}),"\n",(0,l.jsx)(n.p,{children:"Konditional changes the failure surface by binding identity and type at definition time via Kotlin properties:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"No string keys at call sites"}),": flags are accessed as properties (typos become compile errors)."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"No casts at call sites"}),": the return type flows from the flag definition (mismatched types become compile errors)."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"No nulls from evaluation"}),": defaults are required, so evaluation has a total return path."]}),"\n"]}),"\n",(0,l.jsx)(n.mermaid,{value:'flowchart LR\n    Def["Flag defined as a property"] --\x3e Bound["Key + type bound at compile-time"]\n    Bound --\x3e Eval["Evaluation"]\n    Eval --\x3e|Rule matches| Value["Rule value"]\n    Eval --\x3e|No match| Default["Declared default"]\n    style Bound fill: #e1f5ff\n    style Default fill: #fff3cd\n    style Value fill: #c8e6c9'}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'// build.gradle.kts\ndependencies {\n    implementation("io.github.amichne:konditional:0.0.1")\n}\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"your-first-flag",children:"Your first flag"}),"\n",(0,l.jsxs)(n.p,{children:["Define a flag as a delegated property on a ",(0,l.jsx)(n.code,{children:"Namespace"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'import io.amichne.konditional.api.evaluate\nimport io.amichne.konditional.core.Namespace\nimport io.amichne.konditional.context.*\nimport io.amichne.konditional.core.id.StableId\n\nobject AppFeatures : Namespace("app") {\n    val darkMode by boolean<Context>(default = false) {\n        rule(true) {\n            platforms(Platform.IOS)\n            rampUp { 50.0 }\n        }\n    }\n}\n\nval context = Context(\n    locale = AppLocale.UNITED_STATES,\n    platform = Platform.IOS,\n    appVersion = Version.of(2, 1, 0),\n    stableId = StableId.of("user-123"),\n)\n\nval enabled: Boolean = AppFeatures.darkMode.evaluate(context)\n'})}),"\n",(0,l.jsx)(n.p,{children:"Notes:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Evaluation is total for declared features: ",(0,l.jsx)(n.code,{children:"evaluate(context)"})," always returns the flag\u2019s declared Kotlin type (never\nnull)."]}),"\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.code,{children:"evaluateWithReason(context)"})," when you need operational traceability (\u201cwhy did I get this value?\u201d)."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"AppLocale"})," and ",(0,l.jsx)(n.code,{children:"Platform"})," are defaults; you can supply your own locale/platform types by implementing\n",(0,l.jsx)(n.code,{children:"LocaleTag"})," / ",(0,l.jsx)(n.code,{children:"PlatformTag"})," with stable ",(0,l.jsx)(n.code,{children:"id"})," values."]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"a-small-api-surface-intentionally",children:"A small API surface, intentionally"}),"\n",(0,l.jsx)(n.p,{children:"Supported value types (out of the box):"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Type"}),(0,l.jsx)(n.th,{children:"Namespace method"}),(0,l.jsx)(n.th,{children:"Kotlin type"}),(0,l.jsx)(n.th,{children:"Example default"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Boolean"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"boolean(...)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"Boolean"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"false"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"String"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"string(...)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"String"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:'"production"'})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Integer"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"integer(...)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"Int"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"42"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Decimal"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"double(...)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"Double"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"3.14"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Enum"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"enum(...)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"E : Enum<E>"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"LogLevel.INFO"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Data class"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"custom(...)"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"T : KotlinEncodeable<ObjectSchema>"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"MyConfig()"})})]})]})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"common-patterns",children:"Common patterns"}),"\n",(0,l.jsx)(n.h3,{id:"gradual-ramp-up-deterministic",children:"Gradual ramp-up (deterministic)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"val newCheckout by boolean<Context>(default = false) {\n    rule(true) {\n        platforms(Platform.ANDROID)\n        rampUp { 10.0 }\n    }\n}\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Konditional\u2019s ramp-ups are deterministic: the same ",(0,l.jsx)(n.code,{children:"(stableId, flagKey, salt)"})," yields the same bucket assignment."]}),"\n",(0,l.jsx)(n.h3,{id:"platform-specific-configuration",children:"Platform-specific configuration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'val apiEndpoint by string<Context>(default = "https://api.example.com") {\n    rule("https://api-ios.example.com") { platforms(Platform.IOS) }\n    rule("https://api-android.example.com") { platforms(Platform.ANDROID) }\n    rule("https://api-web.example.com") { platforms(Platform.WEB) }\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"ramp-up-allowlisting-internal-testers",children:"Ramp-up allowlisting (internal testers)"}),"\n",(0,l.jsxs)(n.p,{children:["Allowlists bypass ramp-up ",(0,l.jsx)(n.em,{children:"after"})," a rule matches by criteria:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'val newUi by boolean<Context>(default = false) {\n    allowlist(StableId.of("tester-1"))\n    rule(true) { rampUp { 5.0 } }\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"variants-via-enums-not-strings",children:"Variants via enums (not strings)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:"enum class Theme { LIGHT, DARK }\n\nval theme by enum<Theme, Context>(default = Theme.LIGHT) {\n    rule(Theme.DARK) { platforms(Platform.IOS) }\n}\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"namespaces-scale-ownership-not-prefixes",children:"Namespaces scale ownership, not prefixes"}),"\n",(0,l.jsx)(n.p,{children:"Define multiple namespaces when you need isolated registries (per-team, per-domain)."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-kotlin",children:'sealed class AppDomain(id: String) : Namespace(id) {\n    data object Auth : AppDomain("auth") {\n        val socialLogin by boolean<Context>(default = false)\n    }\n\n    data object Payments : AppDomain("payments") {\n        val applePay by boolean<Context>(default = false)\n    }\n}\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Learn the building blocks: ",(0,l.jsx)(n.a,{href:"/core-concepts",children:'"Core Concepts"'})]}),"\n",(0,l.jsxs)(n.li,{children:["Write targeting rules and ramp-ups: ",(0,l.jsx)(n.a,{href:"/targeting-ramp-ups",children:'"Targeting & Ramp-ups"'})]}),"\n",(0,l.jsxs)(n.li,{children:["Understand evaluation order and determinism: ",(0,l.jsx)(n.a,{href:"/evaluation",children:'"Evaluation"'})]}),"\n",(0,l.jsxs)(n.li,{children:["Add runtime-validated JSON configuration: ",(0,l.jsx)(n.a,{href:"/remote-config",children:'"Remote Configuration"'})]}),"\n",(0,l.jsxs)(n.li,{children:["Understand the exact trust boundary: ",(0,l.jsx)(n.a,{href:"/theory",children:'"Theory"'})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);